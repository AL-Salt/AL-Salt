<!doctype HTML>

<head>
    <title>MY Echo</title>
    <script src="http://code.responsivevoice.org/responsivevoice.js"></script>
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.1/css/font-awesome.min.css" />
    <script src="https://code.responsivevoice.org/responsivevoice.js?key=YOUR_UNIQUE_KEY"></script>
    <style type="text/css">
        body {
            font-family: verdana;
        }
        
        #result {
            height: 100px;
            border: 1px solid #ccc;
            padding: 10px;
            box-shadow: 0 0 10px 0 #bbb;
            margin-bottom: 30px;
            font-size: 14px;
            line-height: 25px;
        }
        
        button {
            font-size: 20px;
            position: relative;
            left: 50%;
        }
    </style>
</head>

<body>
    <!-- <p id="ttt">
        هلو
    </p>
    sda
    <button onclick="responsiveVoice.speak('mمم');" type="button" value="Play">Play</button>
    <button onclick="responsiveVoice.speak('مم');" type="button" value="Play">Play</button>

    <button type="button" id='myvoice'>Listen to me</button> -->




    jkdjkasd ajks dkjas djas d
    <script src="https://code.responsivevoice.org/responsivevoice.js?key=apRJxGF6"></script>
    <!-- <script src="https://code.responsivevoice.org/responsivevoice.js?key=apRJxGF6"></script> -->


    <!-- <script>
        JavaScript
            <
            script >
            function getSelectionText() {
                var text = "";
                if (window.getSelection) {
                    text = window.getSelection().toString();
                    // for Internet Explorer 8 and below. For Blogger, you should use &amp;&amp; instead of &&.
                } else if (document.selection && document.selection.type != "Control") {
                    text = document.selection.createRange().text;
                }
                return text;
            }
        $(document).ready(function() { // when the document has completed loading
            $(document).mouseup(function(e) { // attach the mouseup event for all div and pre tags
                setTimeout(function() { // When clicking on a highlighted area, the value stays highlighted until after the mouseup event, and would therefore stil be captured by getSelection. This micro-timeout solves the issue. 
                    responsiveVoice.cancel(); // stop anything currently being spoken
                    responsiveVoice.speak(getSelectionText()); //speak the text as returned by getSelectionText
                }, 1);
            });
        });
    </script>

    <script>
        function getSelectionText() {
            var text = "";
            if (window.getSelection) {
                text = window.getSelection().toString();
                // for Internet Explorer 8 and below. For Blogger, you should use &amp;&amp; instead of &&.
            } else if (document.selection && document.selection.type != "Control") {
                text = document.selection.createRange().text;
            }
            return text;
        }
        $(document).ready(function() { // when the document has completed loading
            $(document).mouseup(function(e) { // attach the mouseup event for all div and pre tags
                setTimeout(function() { // When clicking on a highlighted area, the value stays highlighted until after the mouseup event, and would therefore stil be captured by getSelection. This micro-timeout solves the issue. 
                    responsiveVoice.cancel(); // stop anything currently being spoken
                    responsiveVoice.speak(getSelectionText()); //speak the text as returned by getSelectionText
                }, 1);
            });
        });
    </script>
    </script> -->


    <!-- <script>
        responsiveVoice.speak(document.getElementById('ttt').textContent);
        responsiveVoice.speak("هلو", "ar-SA");
    </script>

    <script>
        const listenBtn = document.getElementById('myvoice');

        listenBtn.addEventListener('click', (e) => {
            e.preventDefault();

            const msg = new SpeechSynthesisUtterance(
                document.getElementById('ttt').textContent

            );
            window.speechSynthesis.speak(msg, "ar-SA");
            // List available voices


        });
    </script> -->

    <script>
        function startConverting() {
            if ('webkitSpeechRecognition' in window) {
                var speechRecognizer = new webkitSpeechRecognition();
                speechRecognizer.continuous = true;
                speechRecognizer.interimResults = true;
                speechRecognizer.lang = 'en-IN';
                speechRecognizer.start();
                var finalTranscripts = '';
                speechRecognizer.onresult = function(event) {
                    var interimTranscripts = '';
                    for (var i = event.resultIndex; i < event.results.length; i++) {
                        var transcript = event.results[i][0].transcript;
                        transcript.replace("\n", "<br>");
                        if (event.results[i].isFinal) {
                            finalTranscripts += transcript;
                            var speechresult = finalTranscripts;
                            console.log(speechresult);
                            if (speechresult) {
                                responsiveVoice.speak(speechresult, "UK English Female", {
                                    pitch: 1
                                }, {
                                    rate: 1
                                });
                            }
                        } else {
                            interimTranscripts += transcript;
                        }
                    }
                    r.innerHTML = finalTranscripts + '<span style="color:#999">' + interimTranscripts + '</span>';
                };
                speechRecognizer.onerror = function(event) {};
            } else {
                r.innerHTML = 'Your browser is not supported. If google chrome, please upgrade!';
            }
        }
    </script>
</body>

</html>